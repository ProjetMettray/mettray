{% extends 'base.html.twig' %}

{% block title %}Liste des réservations | Mettray
{% endblock %}
{% block body %}
	<div class="container">
		<div class="text-center mt-5 pb-2 bg-white border border-ter rounded">
			<h1 class="p-5 text-ter">Liste des Réservations</h1>
			<div class="d-flex start-flex p-4 "></div>
			{% for room in rooms %}
				{% if room.bookings|length > 0 %}
					<h2 class="text-ter">{{room.name}}</h2>
					<table class="table table-striped table-perso table-hover">
						<thead>
							<tr class="table-perso">
								<th scope="col">N°</th>
								<th scope="col">Type de réservation</th>
								<th scope="col">Date de début</th>
								<th scope="col">Date de fin</th>
								<th scope="col">Salle</th>
								<th scope="col">Status</th>
								<th scope="col">Nom de l'association</th>
								<th scope="col">Modifier</th>
								<th scope="col">Supprimer</th>
							</tr>
						</thead>
						<tbody>

							{% for booking in bookings %}
								{% if booking.room.name == room.name %}
									<tr class="table-active ts">
										<td>{{booking.id}}</td>
										<td>{{booking.title}}</td>
										<td>{{booking.startAt|date('d/m/Y')}}</td>
										<td>{{booking.endAt|date('d/m/Y')}}</td>
										<td>{{booking.getRoom().getName()}}</td>
										<td>{{booking.status}}</td>
										<td>
											{% if booking.getAssociation() %}
												{{booking.getAssociation().getName()}}
											{% endif %}
										</td>
										<td>
											<a href="{{ path("booking_edit", {"id": booking.id}) }}" type="button" class="btn fc-button-primary">Modifier</a>
										</td>
										<td>
											<a href="{{ path("booking_delete", {"id": booking.id}) }}" type="button" class="btn btn-danger">Supprimer</a>
										</td>
									</tr>

								{% endif %}
							{% endfor %}
						</tbody>
					</tbody>
				</table>

			{% endif %}

		{% endfor %}
		{% if bookings == null %}
			<p>Aucune réservation</p>
		{% endif %}
	</div>
</div>{% endblock %}
