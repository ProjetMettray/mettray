{% extends 'base.html.twig' %}

{% block title %}La mairie de Mettray | Liste des salles
{% endblock %}

{% block body %}
	<div class="container text-center mt-5 pb-2 bg-white border border-ter rounded">
		<h1 class="p-5 text-ter">Liste des salles par adresse</h1>
		<div class="d-flex start-flex p-4 ">
			{% if app.user %}
				{% if (app.user.roles[0] is same as ("ROLE_ADMIN")) %}
					<a class="btn fc-button-primary ml-3" href="{{ path('location_add') }}">Ajouter une adresse</a>
					<a class="btn fc-button-primary ml-3" href="{{ path('room_add') }}">Ajouter une salle</a>
				{% endif %}
			{% endif %}
		</div>
		{% for loc in location %}
			<table class="table table-striped table-perso table-hover">
				<thead>
					<tr class="table-perso">
						<th scope="col">Nom de la salle</th>
						<th scope="col">Nombre de places</th>
						<th scope="col">Description</th>
					</tr>
				</thead>
				<tbody>
					<h2 class="text-ter">{{loc.name}}</h2>
					<p class="text-ter">
						{{loc.road}}
					</p>
					<p class="text-ter">

						{{loc.cp}}
						{{loc.city}}</p>
					{% if (app.user.roles[0] is same as ("ROLE_ADMIN")) %}
						<div class="m-2">
							<a type="button" class="btn fc-button-primary" href="{{path("location_update",{'id': loc.id})}}">Modifier</a>
							<a type="button" class="btn btn-danger" href="{{path("location_delete",{'id': loc.id})}}">Supprimer</a>
						</div>
					{% endif %}
					{% for room in rooms %}
						{% if room.location.id == loc.id %}
							<tr class="table-active ts ">
								<td>{{ room.name }}</td>
								<td>{{ room.getNbPlace }}</td>
								<td>{{ room.description }}</td>
								{% if app.user %}
									{% if (app.user.roles[0] is same as ("ROLE_ADMIN")) %}
										<td>
											<a href="{{ path("room_delete", {'room': room.id}) }}" type="button" class="btn btn-danger">Supprimer</a>
											<a href="{{ path("room_update", {'room': room.id}) }}" type="button" class="btn fc-button-primary">Editer</a>
										</td>
									{% endif %}
								{% endif %}
							</tr>
						{% endif %}
					{% endfor %}
				</tbody>
			</table>
		{% endfor %}
	</div>
{% endblock %}
